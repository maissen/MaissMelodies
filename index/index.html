<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MaissMelodies</title>

    <!-- stylesheet link -->
    <link rel="stylesheet" href="main.css">

    <!-- Add the Favicon -->
    <link rel="shortcut icon" href="../components/icons/favicon.png" type="image/x-icon">

    <!-- FontAwesome CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />

</head>
<body>
    <!-- <section id="greeting">
        <div id="salut" data-display = 'block'>
            <h3>Welcome To</h3>
            <h1>Maiss Melodies</h1>
            <h4><strong>V1.0</strong></h4>
        </div>
        <div id="me" data-display = 'block'>
            <h3>Made By</h3>
            <h1>Maissen Belgacem</h1>
        </div>

        <div id="select-purpose" data-display = 'block'>
            <h1 id="select-purpose__title">You are looking for</h1>
            <div id="select-purpose__select">
                <button type="button" data-color1 = '#6ab4f9c9' data-color2="royalblue" data-active='false'>
                    <img src="https://img.icons8.com/color/48/baby-mobile.png" alt="baby-mobile"/>
                    <p>Better Sleep</p>
                    <audio src="../components/audio/piano-C.wav"></audio>
                </button>
                <button type="button" data-color1 = '#ffafccc9' data-color2="crimson" data-active='false'>
                    <img src="https://img.icons8.com/color/48/meditation-guru.png" alt="baby-mobile"/>
                    <p>Relaxing</p>
                    <audio src="../components/audio/piano-D.wav"></audio>
                </button>
                <button type="button" data-color1 = '#cdb4dbc9' data-color2="purple" data-active='false'>
                    <img src="https://img.icons8.com/color/48/services--v1.png" alt="baby-mobile"/>
                    <p>Focus</p>
                    <audio src="../components/audio/piano-E.wav"></audio>
                </button>
                <button type="button" data-color1 = '#99d98cc9' data-color2="darkgreen" data-active='false'>
                    <img src="https://img.icons8.com/color/48/working-with-a-laptop.png" alt="baby-mobile"/>
                    <p>Work</p>
                    <audio src="../components/audio/piano-F.wav"></audio>
                </button>

                this script is to add the sound once you click on the items
                <script>
                    var select_buttons = document.querySelectorAll('#select-purpose__select button');
                    for(let i = 0; i < select_buttons.length; i++){
                        select_buttons[i].addEventListener('click', function(){
                            if(select_buttons[i]..type.active == 'false'){
                                select_buttons[i].dataset.active = 'true';
                                select_buttons[i].querySelector('audio').load();
                                select_buttons[i].querySelector('audio').play();

                                select_buttons[i].style.background = "{select_buttons[i].dataset.color2} !important";
                                console.log(select_buttons[i].dataset.color2);
                            }else{
                                select_buttons[i].dataset.active = 'false';
                                select_buttons[i].style.background = "{select_buttons[i].dataset.color1} !important";
                                console.log(select_buttons[i].dataset.color1);
                            }
                        });
                    }
                </script>
            </div>
            <button type="button" id="x">Next</button>
        </div>

        
        this script to play the fade-out and disppear animations for the elements
        <script>
            var i = 0;
            var salut = document.getElementById('salut');
            var me = document.getElementById('me');
            var select_purpose = document.getElementById('select-purpose');
            appear(salut);
            setTimeout(function() {
                disappear(salut);
            }, 2500);
            setTimeout(function() {
                appear(me);
            }, 4000);
            setTimeout(function() {
                disappear(me);
            }, 6500);
            setTimeout(function() {
                appear(select_purpose);
            }, 8000);

            var nexBtn = document.querySelector('#select-purpose #x');
            nexBtn.addEventListener('click', function(){
                disappear(select_purpose);
                setTimeout(() => {
                    document.getElementById('greeting').style.display = 'none';
                    document.getElementById('main-content').style.display = 'block';
                }, 1500);
            });

            function appear(element){
                element.style.display = element.dataset.display;
                element.style.animation = 'fade-out 1.5s linear';
            }
            function disappear(element){
                element.style.animation = 'disappear 1.5s linear';
                setTimeout(() => {
                    element.style.display = 'none';
                    element.style.animation = '';
                }, 1500);
            }
        </script>


    </section> -->

    <main id="main-content">
        <header>
            <img src="../components/img/moon.png" class="img1 img" alt="parallax item couldn't be loaded :/">
            <img src="../components/img/hill2.png" class="img2 img" alt="parallax item couldn't be loaded :/">
            <img src="../components/img/hill3.png" class="img3 img" alt="parallax item couldn't be loaded :/">
            <img src="../components/img/leaf.png" class="img4 img" alt="parallax item couldn't be loaded :/">
            <img src="../components/img/plant.png" class="img5 img" alt="parallax item couldn't be loaded :/">

            <!--? Add the scrolling parallax effect -->
            <script>
                var img = document.querySelectorAll('.img');
                window.addEventListener('scroll', function(){
                    img[0].style.transform = 'translateY(' + window.scrollY / 1.9 + 'px)';
                    img[0].style.transform = 'translateX(' + window.scrollY / 3.9 + 'px)';
                    img[1].style.transform = 'translateX(' + -window.scrollY / 2.9 + 'px)';
                    img[2].style.transform = 'translateX(' + window.scrollY / 3.9 + 'px)';
                    img[3].style.transform = 'translateX(' + window.scrollY / 1.5+ 'px)';
                });
            </script>
        </header>

        <nav id="nav">
            <h1 id="nav__title">Maiss Melodies</h1>
            <div id="nav__mixes-filter">
                <button type="button" onclick="apply_filter('all')" class="nav-active-button">All</button>
                <button type="button" onclick="apply_filter('sleep')">Sleep</button>
                <button type="button" onclick="apply_filter('rain')">Rain</button>
                <button type="button" onclick="apply_filter('relax')">Relax</button>
                <button type="button" onclick="apply_filter('meditation')">Meditation</button>
                <button type="button" onclick="apply_filter('city')">City & Instrument</button>
                <button type="button" onclick="apply_filter('favorite')">Favorits</button>

                <!--? add the nav-active-button to the clicked button -->
                <script>
                    let buttons = document.querySelectorAll('button');
                    for(let i = 0; i < buttons.length; i++){
                        buttons[i].addEventListener('click', function(){
                            for(let j = 0; j < buttons.length; j++){
                                buttons[j].classList.remove('nav-active-button');
                            }
                            buttons[i].classList.add('nav-active-button');
                        });
                    }
                </script>
            </div>
        </nav>

        <div id="container">
            <div class="box" data-type="relax" data-favorite='false' style="background-image: url(../components/img/night\ forest.jpg);">
                <h2 class="box__name">forest</h2>
            </div>
            <div class="box" data-type="relax" data-favorite='false' style="background-image: url(../components/img/camping.jpg);">
                <h2 class="box__name">Camping</h2>
            </div>
            <div class="box" data-type="meditation" data-favorite='false' style="background-image: url(../components/img/deep\ thinking.jpg);">
                <h2 class="box__name">Deep thinking</h2>
            </div>
            <div class="box" data-type="relax" data-favorite='false' style="background-image: url(../components/img/spring.jpg);">
                <h2 class="box__name">Spring</h2>
            </div>
            <div class="box" data-type="rain" data-favorite='false' style="background-image: url(../components/img/ocean\ storm.jpg);">
                <h2 class="box__name">Ocian Storm</h2>
            </div>
            <div class="box" data-type="relax" data-favorite='false' style="background-image: url(../components/img/beach.jpg);">
                <h2 class="box__name">Beach</h2>
            </div>
            <div class="box" data-type="meditation" data-favorite='false' style="background-image: url(../components/img/cave.jpg);">
                <h2 class="box__name">Cave</h2>
            </div>
            <div class="box" data-type="sleep" data-favorite='false' style="background-image: url(../components/img/night.jpg);">
                <h2 class="box__name">Night</h2>
            </div>
            <div class="box" data-type="rain" data-favorite='false' style="background-image: url(../components/img/rainy\ forest.jpg);">
                <h2 class="box__name">Rainy Forest</h2>
            </div>
            <div class="box" data-type="city" data-favorite='false' style="background-image: url(../components/img/city\ life.jpg);">
                <h2 class="box__name">City Life</h2>
            </div>
            <div class="box" data-type="relax" data-favorite='false' style="background-image: url(../components/img/deep\ relaxing.jpg);">
                <h2 class="box__name">Deep Relaxing</h2>
            </div>
            <div class="box" data-type="sleep" data-favorite='false' style="background-image: url(../components/img/sleep.jpg);">
                <h2 class="box__name">Sleep</h2>
            </div>
            <div class="box" data-type="rain" data-favorite='false' style="background-image: url(../components/img/snow\ storm.jpg);">
                <h2 class="box__name">Snow Storm</h2>
            </div>
            <div class="box" data-type="relax" data-favorite='false' style="background-image: url(../components/img/ocean\ life.jpg);">
                <h2 class="box__name">Ocean Life</h2>
            </div>
            <div class="box" data-type="meditation" data-favorite='false' style="background-image: url(../components/img/focus.jpg);">
                <h2 class="box__name">Focus</h2>
            </div>
            <div class="box" data-type="sleep" data-favorite='false' style="background-image: url(../components/img/sadness.webp);">
                <h2 class="box__name">Sadness</h2>
            </div>
            <div class="box" data-type="city" data-favorite='false' style="background-image: url(../components/img/piano.jfif);">
                <h2 class="box__name">Piano</h2>
            </div>
        </div>

        <div id="loadContent" data-display = 'block'>
            <button type="button" id="loadContent__close-section">
                <i class="fa-solid fa-xmark" id="close-section"></i>

                <!--? display the timer table -->
                <script>
                        let closeBtn = document.getElementById('loadContent__close-section');
                        closeBtn.onclick = function(){
                            loadContent.style.display = 'none';
                        }
                </script>
            </button>

            <div id="loadContent__timer">
                <div id="time">
                    <h1><span>15</span> : <span>32</span></h1>
                    <h2 id="loadName">Timer</h2>
                </div>
            </div>

            <div id="loadContent__buttons">
                <button type="button" id="loadContent__clock">
                    <i class="fa-solid fa-clock" id="clock"></i>
    
                    <!--? display the timer table -->
                    <script>
                        
                    </script>
                </button>
                <button type="button" id="loadContent__play-stop">
                    <i class="fa-solid fa-play" id="icon"></i>
    
                    <!--? toggle play / stop button -->
                    <script>
                        let icon = document.getElementById('icon');
                        document.getElementById('loadContent__play-stop').onclick = function(){
                            if(icon.classList.contains('fa-play')){
                                icon.classList.remove('fa-play');
                                icon.classList.add('fa-pause');
                            }else{
                                icon.classList.remove('fa-pause');
                                icon.classList.add('fa-play');
                            }
                        }
                    </script>
                </button>
                <button type="button" id="loadContent__favorite" data-active="false">
                    <i class="fa-solid fa-heart" id="favorite"></i>
                    <audio src="../components/audio/mixkit-software-interface-start-2574.mp3" id="favorite-sound-btn"></audio>
                </button> 
            </div>           
        </div>

        <!--? Display the load content -->
        <script>
            let boxs = document.querySelectorAll('.box');
            let loadContent = document.getElementById('loadContent');
            let favorite = document.getElementById('loadContent__favorite');
            let favorite_sound = document.getElementById('favorite-sound-btn');

            for(let i = 0; i < boxs.length; i++){
                boxs[i].onclick = function(){
                    loadContent.style.display = loadContent.dataset.display;
                    loadContent.style.background = boxs[i].style.backgroundImage;
                    document.body.classList.add('stopscrolling');

                    if(boxs[i].dataset.favorite == 'true'){
                        favorite.classList.add('active-favorite-btn');
                    }else{
                        favorite.classList.remove('active-favorite-btn');
                    }

                    // load the name of the box in the load section
                    document.getElementById('loadName').textContent = boxs[i].children[0].textContent;

                    <!--? activate favorite button on click and save the sounds  -->
                    favorite.onclick = function(){
                        if(boxs[i].dataset.favorite == 'false'){
                            favorite.classList.add('active-favorite-btn');
                            favorite.dataset.active = 'true';
                            favorite_sound.load();
                            favorite_sound.play();

                            // append the box to favorite list
                            boxs[i].dataset.favorite = 'true';
                            document.getElementById('nav__mixes-filter').children[6].click();

                        }else{
                            favorite.classList.remove('active-favorite-btn');
                            boxs[i].dataset.favorite = 'false';

                            document.getElementById('nav__mixes-filter').children[6].click();
                        }
                    }
                }
            }
        </script>

        <!--? apply the filter -->
        <script>
            function apply_filter(filter){
                let boxs = document.querySelectorAll('.box');

                for(let i = 0; i < boxs.length; i++){
                    if(filter == 'all'){
                        boxs[i].style.display = 'block';
                    }
                    else if(boxs[i].dataset.type == filter){
                        boxs[i].style.display = 'block';
                    }
                    else if(boxs[i].dataset.favorite == 'true' && filter == 'favorite'){
                        boxs[i].style.display = 'block';
                    }
                    else{
                        boxs[i].style.display = 'none';
                    }
                }      
                console.log(filter);  
            }
        </script>
    </main>

    <script src="main.js"></script>
    <script src="js/greeting.js"></script>
</body>
</html>